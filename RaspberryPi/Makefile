all:		libI2Cdev.a SensorStick

clean:
		rm *.o *~

ARDUINO_SRC=../Arduino
RPI_SRC=../RaspberryPi

RPI2C_DEFS=-DRPI2C -DI2CDEV_SERIAL_DEBUG
RPI2C_HDRS=$(RPI_SRC)/RPi2c.h $(RPI_SRC)/RPiHacks.h $(ARDUINO_SRC)/I2Cdev/I2Cdev.h
RPI2C_OBJS=RPi2c.o RPiHacks.o RPi2c.o I2Cdev.o
RPI2C_INCS=-I$(ARDUINO_SRC)/I2Cdev -I$(RPI_SRC)

DEVICE_OBJS = \
	AD7746.o \
	ADS1115.o \
	ADXL345.o \
	AK8975.o \
	BMA150.o \
	BMP085.o \
	HMC5843.o \
	HMC5883L.o \
	ITG3200.o \
	L3G4200D.o \
	LM73.o \
	MPR121.o \
	MPU6050.o \
	TCA6424A.o

UNSUPPORTED=DS1307.o \
	IAQ2000.o \
	SSD1308.o

SensorStick:	libI2Cdev.a $(RPI_SRC)/examples/SensorStick.cpp $(RPI2C_HDRS)
		g++ -O2 -o $@ $(RPI2C_DEFS) $(RPI2C_INCS) $(RPI_SRC)/examples/SensorStick.cpp -I$(ARDUINO_SRC) -L. -lI2Cdev

libI2Cdev.a:	$(DEVICE_OBJS) $(RPI2C_OBJS)
		ar rcs $@ $(DEVICE_OBJS) $(RPI2C_OBJS)

RPi2c.o:	$(RPI_SRC)/RPi2c.cpp $(RPI_SRC)/RPi2c.h
		g++ -O2 -c -o $@ $(RPI2C_DEFS) -I$(RPI_SRC) $(RPI_SRC)/RPi2c.cpp

RPiHacks.o:	$(RPI_SRC)/RPiHacks.cpp $(RPI_SRC)/RPiHacks.h
		g++ -O2 -c -o $@ $(RPI2C_DEFS) -I$(RPI_SRC) $(RPI_SRC)/RPiHacks.cpp

I2Cdev.o:	$(ARDUINO_SRC)/I2Cdev/I2Cdev.cpp $(RPI2C_HDRS)
		g++ -O2 -c -o $@ $(RPI2C_DEFS) $(RPI2C_INCS) $(ARDUINO_SRC)/I2Cdev/I2Cdev.cpp

AD7746.o:	$(ARDUINO_SRC)/AD7746/AD7746.cpp $(RPI2C_HDRS)
		g++ -O2 -c -o $@ $(RPI2C_DEFS) $(RPI2C_INCS) -I$(ARDUINO_SRC)/AD7746 $(ARDUINO_SRC)/AD7746/AD7746.cpp

ADS1115.o:	$(ARDUINO_SRC)/ADS1115/ADS1115.cpp $(RPI2C_HDRS)
		g++ -O2 -c -o $@ $(RPI2C_DEFS) $(RPI2C_INCS) -I$(ARDUINO_SRC)/ADS1115 $(ARDUINO_SRC)/ADS1115/ADS1115.cpp

ADXL345.o:	$(ARDUINO_SRC)/ADXL345/ADXL345.cpp $(RPI2C_HDRS)
		g++ -O2 -c -o $@ $(RPI2C_DEFS) $(RPI2C_INCS) -I$(ARDUINO_SRC)/ADXL345 $(ARDUINO_SRC)/ADXL345/ADXL345.cpp

AK8975.o:	$(ARDUINO_SRC)/AK8975/AK8975.cpp $(RPI2C_HDRS)
		g++ -O2 -c -o $@ $(RPI2C_DEFS) $(RPI2C_INCS) -I$(ARDUINO_SRC)/AK8975 $(ARDUINO_SRC)/AK8975/AK8975.cpp

BMA150.o:	$(ARDUINO_SRC)/BMA150/BMA150.cpp $(RPI2C_HDRS)
		g++ -O2 -c -o $@ $(RPI2C_DEFS) $(RPI2C_INCS) -I$(ARDUINO_SRC)/BMA150 $(ARDUINO_SRC)/BMA150/BMA150.cpp

BMP085.o:	$(ARDUINO_SRC)/BMP085/BMP085.cpp $(RPI2C_HDRS)
		g++ -O2 -c -o $@ $(RPI2C_DEFS) $(RPI2C_INCS) -I$(ARDUINO_SRC)/BMP085 $(ARDUINO_SRC)/BMP085/BMP085.cpp

DS1307.o:	$(ARDUINO_SRC)/DS1307/DS1307.cpp $(RPI2C_HDRS)
		g++ -O2 -c -o $@ $(RPI2C_DEFS) $(RPI2C_INCS) -I$(ARDUINO_SRC)/DS1307 $(ARDUINO_SRC)/DS1307/DS1307.cpp

HMC5843.o:	$(ARDUINO_SRC)/HMC5843/HMC5843.cpp $(RPI2C_HDRS)
		g++ -O2 -c -o $@ $(RPI2C_DEFS) $(RPI2C_INCS) -I$(ARDUINO_SRC)/HMC5843 $(ARDUINO_SRC)/HMC5843/HMC5843.cpp

HMC5883L.o:	$(ARDUINO_SRC)/HMC5883L/HMC5883L.cpp $(RPI2C_HDRS)
		g++ -O2 -c -o $@ $(RPI2C_DEFS) $(RPI2C_INCS) -I$(ARDUINO_SRC)/HMC5883L $(ARDUINO_SRC)/HMC5883L/HMC5883L.cpp

IAQ2000.o:	$(ARDUINO_SRC)/IAQ2000/IAQ2000.cpp $(RPI2C_HDRS)
		g++ -O2 -c -o $@ $(RPI2C_DEFS) $(RPI2C_INCS) -I$(ARDUINO_SRC)/IAQ2000 $(ARDUINO_SRC)/IAQ2000/IAQ2000.cpp

ITG3200.o:	$(ARDUINO_SRC)/ITG3200/ITG3200.cpp $(RPI2C_HDRS)
		g++ -O2 -c -o $@ $(RPI2C_DEFS) $(RPI2C_INCS) -I$(ARDUINO_SRC)/ITG3200 $(ARDUINO_SRC)/ITG3200/ITG3200.cpp

L3G4200D.o:	$(ARDUINO_SRC)/L3G4200D/L3G4200D.cpp $(RPI2C_HDRS)
		g++ -O2 -c -o $@ $(RPI2C_DEFS) $(RPI2C_INCS) -I$(ARDUINO_SRC)/L3G4200D $(ARDUINO_SRC)/L3G4200D/L3G4200D.cpp

LM73.o:		$(ARDUINO_SRC)/LM73/LM73.cpp $(RPI2C_HDRS)
		g++ -O2 -c -o $@ $(RPI2C_DEFS) $(RPI2C_INCS) -I$(ARDUINO_SRC)/LM73 $(ARDUINO_SRC)/LM73/LM73.cpp

MPR121.o:	$(ARDUINO_SRC)/MPR121/MPR121.cpp $(RPI2C_HDRS)
		g++ -O2 -c -o $@ $(RPI2C_DEFS) $(RPI2C_INCS) -I$(ARDUINO_SRC)/MPR121 $(ARDUINO_SRC)/MPR121/MPR121.cpp

MPU6050.o:	$(ARDUINO_SRC)/MPU6050/MPU6050.cpp $(RPI2C_HDRS)
		g++ -O2 -c -o $@ $(RPI2C_DEFS) $(RPI2C_INCS) -I$(ARDUINO_SRC)/MPU6050 $(ARDUINO_SRC)/MPU6050/MPU6050.cpp

SSD1308.o:	$(ARDUINO_SRC)/SSD1308/SSD1308.cpp $(RPI2C_HDRS)
		g++ -O2 -c -o $@ $(RPI2C_DEFS) $(RPI2C_INCS) -I$(ARDUINO_SRC)/SSD1308 $(ARDUINO_SRC)/SSD1308/SSD1308.cpp

TCA6424A.o:	$(ARDUINO_SRC)/TCA6424A/TCA6424A.cpp $(RPI2C_HDRS)
		g++ -O2 -c -o $@ $(RPI2C_DEFS) $(RPI2C_INCS) -I$(ARDUINO_SRC)/TCA6424A $(ARDUINO_SRC)/TCA6424A/TCA6424A.cpp


